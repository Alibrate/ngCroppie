!function(){"use strict";angular.module("ngCroppie",[]).directive("ngCroppie",["$timeout",function(o){return{restrict:"AE",scope:{src:"=",rotation:"=",viewport:"=",boundry:"=",type:"@",zoom:"@",mousezoom:"@",zoomslider:"@",exif:"@",orientation:"@",update:"=",ngModel:"=",mobile:"@"},link:function(e,n,t){void 0==e.viewport&&(e.viewport={w:null,h:null}),void 0==e.boundry&&(e.boundry={w:null,h:null}),!0===e.mobile?(e.viewport.w=void 0!=e.viewport.w?e.viewport.w:200,e.viewport.h=void 0!=e.viewport.h?e.viewport.h:250,e.boundry.w=void 0!=e.boundry.w?e.boundry.w:250,e.boundry.h=void 0!=e.boundry.h?e.boundry.h:300):(e.viewport.w=void 0!=e.viewport.w?e.viewport.w:300,e.viewport.h=void 0!=e.viewport.h?e.viewport.h:300,e.boundry.w=void 0!=e.boundry.w?e.boundry.w:400,e.boundry.h=void 0!=e.boundry.h?e.boundry.h:400),e.viewport.w>e.boundry.w&&(e.viewport.w=e.boundry.w),e.viewport.h>e.boundry.h&&(e.viewport.h=e.boundry.h);var i="true"===e.zoom||void 0===e.zoom,r="true"===e.mousezoom||void 0===e.mousezoom,u="true"===e.zoomslider||void 0===e.zoomslider,d={viewport:{width:e.viewport.w,height:e.viewport.h,type:e.type||"square"},boundary:{width:e.boundry.w,height:e.boundry.h},enableZoom:i,mouseWheelZoom:r,showZoomer:u,enableExif:e.exif,enableOrientation:e.orientation};void 0!=e.update&&(d.update=e.update);var a,l=new Croppie(n[0],d),v=angular.element(n[0])[0],w=angular.element(n[0].getElementsByClassName("cr-boundary"))[0].getBoundingClientRect();v.addEventListener("mousedown",function(){a=window.setInterval(function(){l.result("canvas").then(function(o){e.$apply(function(){e.ngModel=o})})},250)},!1),r&&v.addEventListener("wheel",function(o){console.log("Wheel event called"),o.preventDefault(),o.clientX>w.left&&o.clientX<w.right&&o.clientY<w.bottom&&o.clientY>w.top&&l.result("canvas").then(function(o){e.$apply(function(){e.ngModel=o})})},!1),v.addEventListener("mouseup",function(){clearInterval(a)},!1),v.addEventListener("mouseleave",function(){clearInterval(a)},!1),v.addEventListener("mouseout",function(){clearInterval(a)},!1),e.$on("$destroy",function(o){clearInterval(a)}),e.$watch("rotation",function(o,n){if("false"===e.orientation||void 0==e.orientation)throw"ngCroppie: Cannot rotate without 'orientation' option";l.rotate(o-n),l.result("canvas").then(function(o){e.$apply(function(){e.ngModel=o})})}),e.$watch("src",function(n,t){void 0!=e.src&&(l.bind(e.src),o(function(){l.result("canvas").then(function(o){e.$apply(function(){e.ngModel=o})})},250))})}}}])}();